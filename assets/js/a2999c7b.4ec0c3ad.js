"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[167],{5756(e,n,t){t.d(n,{R:()=>d,x:()=>r});var s=t(9471);const i={},o=s.createContext(i);function d(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(o.Provider,{value:n},e.children)}},8161(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"development/testing","title":"Testing","description":"Parascope maintains a high level of code quality through comprehensive unit and end-to-end tests.","source":"@site/docs/development/testing.md","sourceDirName":"development","slug":"/development/testing","permalink":"/parascope/docs/development/testing","draft":false,"unlisted":false,"editUrl":"https://github.com/tokoro10g/parascope/tree/main/docs/docs/development/testing.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Development Setup","permalink":"/parascope/docs/development/setup"}}');var i=t(2615),o=t(5756);const d={sidebar_position:2},r="Testing",c={},l=[{value:"Backend Tests",id:"backend-tests",level:2},{value:"Running with Docker (Recommended)",id:"running-with-docker-recommended",level:3},{value:"Running Locally",id:"running-locally",level:3},{value:"End-to-End (E2E) Tests",id:"end-to-end-e2e-tests",level:2},{value:"Running in Docker",id:"running-in-docker",level:3},{value:"Targeted Testing",id:"targeted-testing",level:3},{value:"Visual Debugging (Videos)",id:"visual-debugging-videos",level:3},{value:"Continuous Integration",id:"continuous-integration",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"testing",children:"Testing"})}),"\n",(0,i.jsx)(n.p,{children:"Parascope maintains a high level of code quality through comprehensive unit and end-to-end tests."}),"\n",(0,i.jsx)(n.h2,{id:"backend-tests",children:"Backend Tests"}),"\n",(0,i.jsxs)(n.p,{children:["Backend tests use ",(0,i.jsx)(n.strong,{children:"pytest"})," and run in an isolated environment with a dedicated database."]}),"\n",(0,i.jsx)(n.h3,{id:"running-with-docker-recommended",children:"Running with Docker (Recommended)"}),"\n",(0,i.jsx)(n.p,{children:"The easiest way to run backend tests is using the dedicated test orchestration file. This handles the transient database and environment cleanup automatically."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose -f docker-compose.test.yml up --build --abort-on-container-exit\n"})}),"\n",(0,i.jsx)(n.h3,{id:"running-locally",children:"Running Locally"}),"\n",(0,i.jsx)(n.p,{children:"If you have a local PostgreSQL instance dedicated to testing:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.code,{children:"DATABASE_URL"})," to your test database in ",(0,i.jsx)(n.code,{children:"backend/.env"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Run the tests:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd backend\nuv run pytest\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"end-to-end-e2e-tests",children:"End-to-End (E2E) Tests"}),"\n",(0,i.jsxs)(n.p,{children:["E2E tests use ",(0,i.jsx)(n.strong,{children:"Playwright"})," to verify the full stack (Frontend + Backend + DB)."]}),"\n",(0,i.jsx)(n.h3,{id:"running-in-docker",children:"Running in Docker"}),"\n",(0,i.jsx)(n.p,{children:"To run all E2E tests in a completely isolated environment:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose -f docker-compose.e2e.yml up --build --abort-on-container-exit --exit-code-from e2e-runner\n"})}),"\n",(0,i.jsx)(n.h3,{id:"targeted-testing",children:"Targeted Testing"}),"\n",(0,i.jsxs)(n.p,{children:["You can run specific test files using the ",(0,i.jsx)(n.code,{children:"PLAYWRIGHT_ARGS"})," environment variable:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'PLAYWRIGHT_ARGS="tests/folders.spec.ts" docker compose -f docker-compose.e2e.yml up --build --abort-on-container-exit --exit-code-from e2e-runner\n'})}),"\n",(0,i.jsx)(n.h3,{id:"visual-debugging-videos",children:"Visual Debugging (Videos)"}),"\n",(0,i.jsxs)(n.p,{children:["To record videos of the test execution (saved in ",(0,i.jsx)(n.code,{children:"e2e/test-results/"}),"), set ",(0,i.jsx)(n.code,{children:"VIDEO=on"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose -f docker-compose.e2e.yml run -e VIDEO=on e2e-runner\n"})}),"\n",(0,i.jsx)(n.h2,{id:"continuous-integration",children:"Continuous Integration"}),"\n",(0,i.jsxs)(n.p,{children:["Every pull request triggers a CI pipeline (defined in ",(0,i.jsx)(n.code,{children:".github/workflows/ci.yml"}),") that executes:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Frontend Linting and Build."}),"\n",(0,i.jsx)(n.li,{children:"Backend Linting (Ruff) and Unit Tests."}),"\n",(0,i.jsx)(n.li,{children:"Full E2E Test Suite."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);